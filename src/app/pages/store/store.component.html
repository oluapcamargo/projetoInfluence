<nb-card [nbSpinner]="isFetching" nbSpinnerSize="giant">
  <nb-card-header>
    <div class="row">
      <div class="col titulo d-flex align-items-center">
        Empresas
      </div>
      <div class="col text-right">
        <button
          ghost
          nbButton
          [status]="isFiltering ? 'danger' : 'info'"
          class="mx-md-0 mx-lg-2 my-md-2 my-md-0"
          size="small"
          (click)="handleFilter()"
        >
          <nb-icon icon="funnel-outline"></nb-icon>
          {{ isFiltering ? "Desativar filtro" : "Filtrar resultado" }}
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body>
    <div class="filter-group" *ngIf="isFiltering">
      <div class="row mt-2 mb-4">
        <div class="col-12 title-gray">
          Filtrar consulta:
        </div>
      </div>
      <div class="row mt-4">
        <div class="form-group col-sm-12 col-md-12 col-lg-4 col-xl-2">
          <label fullWidth>Nome</label>
          <input
            name="nome"
            type="nome"
            nbInput
            fullWidth
            [(ngModel)]="filtro.nome"
          />
        </div>
        <div class="form-group col-sm-12 col-md-12 col-lg-8 col-xl-6">
          <label fullWidth>Email</label>
          <input
            name="email"
            fullWidth
            type="email"
            nbInput
            maxlength="50"
            placeholder="ex: joaodasilva@gmail.com"
            [(ngModel)]="filtro.email"
          />
        </div>
        <div class="form-group col-sm-12 col-md-12 col-lg-4 col-xl-2">
          <label>Telefone</label>
          <input
            name="telefone"
            fullWidth
            type="text"
            nbInput
            mask
            mask="(00)00000-0000"
            maxlength="50"
            [(ngModel)]="filtro.email"
          />
        </div>
        <div>
          <button
            size="medium"
            nbButton
            tooltip="Cadastrar novo tipo de serviÃ§o"
            placement="top"
            delay="500"
            (click)="search()"
          >
            Pesquisar
          </button>
        </div>
      </div>
    </div>
    <div class="row my-3">
      <div class="col-12 title-gray">
        Resultado:
      </div>
    </div>
    <app-data-table
      [data]="data"
      *ngIf="data.length > 0"
      [defaultColumns]="columns"
      [totalRecords]="totalRecords"
      (pageChanged)="changePage($event)"
    ></app-data-table>
  </nb-card-body>
</nb-card>
